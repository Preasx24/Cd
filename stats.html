<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AdRevenuePro Stats</title>
  <style>
    body { font-family: sans-serif; background:#121212; color:#eee; padding:20px; }
    .card { background:#1e1e1e; padding:20px; border-radius:12px; max-width:500px; margin:auto; }
    pre { background:#000; padding:12px; border-radius:8px; color:#0f0; }
  </style>
</head>
<body>
  <div class="card">
    <h2>ðŸ“Š Your Stats</h2>
    <p id="welcome"></p>
    <pre id="statsBox">Loading...</pre>
    <h3>Invite URL</h3>
    <pre id="invite"></pre>
  </div>

  <script>
    const mappingUrl="https://gist.githubusercontent.com/Preasx24/4517ac43eff88b7e226fbbdc627a3c08/raw/gistfile1.txt";
    const user=JSON.parse(localStorage.getItem("adRevenueUser")||"{}");
    if(!user.accessCode){ document.body.innerHTML="Not logged in"; }

    document.getElementById('welcome').textContent=`Welcome ${user.username}`;

    fetch(mappingUrl).then(r=>r.json()).then(async map=>{
      const entry=map.find(e=>e.accessCode===user.accessCode);
      if(!entry){ document.getElementById("statsBox").textContent="No gist mapping found."; return; }
      const gist=await fetch(entry.gistUrl).then(r=>r.json());
      document.getElementById("statsBox").textContent=JSON.stringify(gist.files["stats.json"].content,null,2);
    });

    document.getElementById('invite').textContent=`https://revenue.dtech-services.co.za/#${user.accessCode}`;
  </script>
</body>
</html>